#!/bin/bash

# Update AUR package in their respective directory
dir=$(pwd)
dir=${dir##*/}
dir=${dir^^}

gitPull=$(git pull)
if [[ "$gitPull" != "Already up to date." ]]; then 
	while : 
	do
		echo
		echo "Show git pull output? [Y/n]: "
		read usrGitIn
		usrGitIn=${usrGitIn:0:1} 
		if [[ "${usrGitIn^}" == "Y" ]]; then 
			echo "$gitPull"
			break	
		elif [[ "${usrGitIn^}" == "N" ]]; then
			break
		fi
	done
	whileBrk=false
	while [[ "$whileBrk" == false ]];
	do
		echo
		echo "Proceed with $dir package build? [Y/n]: "
		read usrIn
		usrIn=${usrIn:0:1}
		if [[ "${usrIn^}" == "Y" ]]; then
			makepkg -sri
			while :
			do	
				whileBrk=true
				echo
				echo "Clean $dir repo files? [Y/n]: "
				read userChoice
				userChoice=${userChoice:0:1}		
				if [[ "${userChoice^}" == "Y" ]]; then
					git clean -fdx
					break
				elif [[ "${userChoice^}" == "N" ]]; then
					break
				fi
			done
			echo
			echo "::: AUR $dir package now updated and installed. :::"
		elif [[ "${firstLet^}" == "N" ]]; then
			echo "Alright, maybe next time; Later tater!"
			break
		fi
	done	
else
	echo $gitPull 
    echo "::: Stay cool :::"
fi
